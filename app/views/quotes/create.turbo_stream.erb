<%# app/views/quotes/create.turbo_stream.erb %>

<%# ✨ Si la cita se guardó correctamente: %>
<% if @quote.persisted? %>
  <%# Añade la nueva cita al PRINCIPIO de la lista (el frame con id="quotes"). %>
  <%= turbo_stream.prepend "quotes", @quote %>
  <%# Reemplaza el frame del formulario de "nueva cita" (id="new_quote") con un enlace "New quote" vacío. %>
  <%= turbo_stream.replace "new_quote" do %>
    <%= link_to "New quote",
                new_quote_path,
                class: "btn btn--primary" %>
  <% end %>
<% else %>
  <%# ✨ Si hubo errores al guardar: %>
  <%# Reemplaza el frame del formulario (id="new_quote") con el mismo formulario pero ahora con los errores visibles. %>
  <%= turbo_stream.replace "new_quote" do %>
    <%= render "form", quote: @quote %>
  <% end %>
<% end %>